!function(a){var n={};function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=a,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=70)}([function(e,t,a){"use strict";var n=a(1),s=a(2),o=a.n(s).a.module("avatar",["robloxApp","cursorPagination","recommendations","modal","thumbnails","thumbnails3d","toast","infiniteScroll"]).config(["$injector",function(e){n.Lang.AvatarResources&&e.get("languageResourceProvider").setLanguageKeysFromFile(n.Lang.AvatarResources)}]);t.a=o},function(e,t){e.exports=Roblox},function(e,t){e.exports=angular},function(e,t){function o(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function i(e){return e.split("/").pop().replace(".html","")}var a={importFilesUnderPath:function(e){e.keys().forEach(e)},templateCacheGenerator:function(e,t,n,s){return e.module(t,[]).run(["$templateCache",function(a){n&&n.keys().forEach(function(e){var t=o(i(e));a.put(t,n(e))}),s&&s.keys().forEach(function(e){var t=o(i(e));a.put(t,function(e){return e.replace(/<\/?script[^>]*>/gi,"")}(s(e)))})}])}};e.exports=a},,function(e,t){e.exports=jQuery},,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){var n={"./avatarAssetTypeNames.js":19,"./avatarUrlConstants.js":20};function s(e){var t=o(e);return a(t)}function o(e){if(a.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(e.exports=s).id=18},function(e,t,a){"use strict";a.r(t);var n={hat:"Hat",hairAccessory:"Hair Accessory",faceAccessory:"Face Accessory",neckAccessory:"Neck Accessory",shoulderAccessory:"Shoulder Accessory",frontAccessory:"Front Accessory",backAccessory:"Back Accessory",waistAccessory:"Waist Accessory",climbAnimation:"Climb Animation",fallAnimation:"Fall Animation",jumpAnimation:"Jump Animation",runAnimation:"Run Animation",swimAnimation:"Swim Animation",walkAnimation:"Walk Animation",emoteAnimation:"Emote Animation"};a(0).a.constant("avatarAssetTypeNames",n),t.default=n},function(e,t,a){"use strict";a.r(t);var n={www:{avatarThumbnail:"/avatar-thumbnail/json?width=352&height=352&format=png&userId=",assetThumbnail:"/asset-thumbnail/json?width=150&height=150&format=png&assetId=",outfitThumbnail:"/outfit-thumbnail/json?width=150&height=150&format=png&userOutfitId=",inventoryJson:"/users/inventory/list-json",outfitThumbnailJson:"/outfit-thumbnail/json",catalog:"/catalog",avatar:"/my/avatar"},avatarApi:{getOutfitDetailsUrl:"/v1/outfits/{id}/details",createOutfitUrl:"/v1/outfits/create",deleteOutfitUrl:"/v1/outfits/{id}/delete",updateOutfitUrl:"/v1/outfits/{id}/update",wearOutfitUrl:"/v1/outfits/{id}/wear",getOutfitsUrl:"/v1/users/{userId}/outfits",patchOutfitUrl:"/v1/outfits/{id}",setBodyColorsUrl:"/v1/avatar/set-body-colors",setScalesUrl:"/v1/avatar/set-scales",setAvatarTypeUrl:"/v1/avatar/set-player-avatar-type",getAvatarUrl:"/v1/avatar",getAvatarRulesUrl:"/v1/avatar-rules",getRecentItemsUrl:"/v1/recent-items/{type}/list",wearAssetUrl:"/v1/avatar/assets/{id}/wear",removeAssetUrl:"/v1/avatar/assets/{id}/remove",setWearingAssetsUrl:"/v1/avatar/set-wearing-assets",redrawThumbnailUrl:"/v1/avatar/redraw-thumbnail",getEmotesUrl:"/v1/emotes",equipEmoteUrl:"/v1/emotes/{assetId}/{position}",unequipEmoteUrl:"/v1/emotes/{position}",getMetaData:"/v1/avatar/metadata"},catalogApi:{getCategories:"/v1/categories",getSubcategories:"/v1/subcategories"},modals:{openedClass:"modal-open-noscroll",outfitName:{templateUrl:"outfit-name-modal",controllerName:"outfitNameModalController"},outfitUpdate:{templateUrl:"outfit-update-modal"},advancedAccessories:{templateUrl:"advanced-accessories-modal",controllerName:"advancedAccessoriesModalController"},advancedBodyColor:{templateUrl:"advanced-body-colors-modal",controllerName:"advancedBodyColorsModalController"},emotes:{templateUrl:"emotes-modal",controllerName:"emotesModalController"}},templates:{avatarBack:"avatar-back",avatarBase:"avatar-base",avatarEditorTabs:"avatar-editor-tabs",avatarScaling:"avatar-scaling",avatarTabContentHeader:"avatar-tab-content-header",avatarTabContent:"avatar-tab-content",avatarItems:"avatar-items-list",avatarItemCard:"avatar-item-card",emotesItemCard:"emotes-item-card",recommendedItems:"recommended-items"}};a(0).a.constant("avatarUrlConstants",n),t.default=n},function(e,t,a){var n={"./advancedAccessoriesModalController.js":22,"./advancedBodyColorsModalController.js":23,"./avatarController.js":71,"./avatarItemsController.js":24,"./avatarScaleController.js":25,"./avatarTypeController.js":26,"./bodyColorsController.js":27,"./emotesModalController.js":28,"./outfitNameModalController.js":29,"./outfitsController.js":30,"./recentItemsController.js":31};function s(e){var t=o(e);return a(t)}function o(e){if(a.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(e.exports=s).id=21},function(e,t,a){"use strict";a.r(t);a(1);var n=a(0);function s(e,t,a){e.params=a,e.submit=function(){t.close()},e.close=function(){t.dismiss()}}s.$inject=["$scope","$uibModalInstance","modalData"],n.a.controller("advancedAccessoriesModalController",s),t.default=s},function(e,t,a){"use strict";a.r(t);a(1);var n=a(0);function s(e,t,a){e.params=a,e.submit=function(){t.close()},e.close=function(){t.dismiss()}}s.$inject=["$scope","$uibModalInstance","modalData"],n.a.controller("advancedBodyColorsModalController",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(2),v=a.n(n),f=a(1),s=a(0);function o(o,i,e,a,t,n,s,r,l){i.debug("avatarItemsController"),o.isEmotesEnabled=!1,o.loading=!1,o.items=[],o.emptyMessage="";var c={},d=null;function u(e){c={},o.items=[],void 0!==e&&v.a.forEach(e,function(e){o.items.push(e),c[e.id]=!0}),o.loading=!0,d.loadFirstPage().then(function(){o.loading=!1},function(){})}function m(){var e=o.selectedMenu,t=e.fullLabel?e.fullLabel:e.label;o.emptyMessage=a.assets.emptyMessage(t)}function g(){return"Assets"===o.selectedTab.tabType}d=e.createPager({limitName:"itemsPerPage",sortOrder:e.sortOrder.Desc,pageSize:30,loadPageSize:50,getDataListFromResponse:function(a){return s(function(e,t){e(a.Data?a.Data.Items:[])})},getNextPageCursorFromResponse:function(e){return e.Data?e.Data.nextPageCursor:null},getErrorsFromResponse:function(e){return e.isValid?[]:[{code:0,message:e.Data||e.error||""}]},getCacheKeyParameters:function(e){return{assetTypeId:e.assetTypeId}},getRequestUrl:function(){return t.www.inventoryJson},beforeLoad:function(e,t){},loadSuccess:function(e){var a,n=[],s=d.getPagingParameter("assetTypeId");a=o.isEmotesEnabled?r.getAssetTypeName(s):o.getAssetTypeName(s),o.recommendationsData&&(o.recommendationsData.showRecommendations=!0,o.recommendationsData.recommendationType=l.recommendationTypes.assets,o.recommendationsData.recommendationSubtype=s),v.a.forEach(e,function(e){var t={};t.name=e.Item.Name,t.id=e.Item.AssetId,t.type="Asset",o.addItemThumbnailAndLink(t),o.$parent.updateItemSelected&&o.$parent.updateItemSelected(t),t.expired=e.UserItem&&e.UserItem.IsRentalExpired,t.thumbnail=e.Thumbnail,t.assetType={id:s,name:a},t.expired?i.debug("".concat(t.name," is expired!")):c[t.id]?i.debug("".concat(t.name," is a duplicate")):(c[t.id]=!0,n.push(t))}),[].push.apply(o.items,n),d.hasNextPage()?(o.recommendationsData.showRecommendations=!1,o.$emit("manualInfiniteScrollCheck")):(i.debug("Doesn't have next page, loading recommendations"),o.recommendationsData.showRecommendations=!0)},loadError:function(e){o.systemFeedback.error(a.assets.couldNotLoadList)}}),o.getNextPage=function(){if("Assets"===o.selectedTab.tabType&&d.canLoadNextPage()){var e=d.loadNextPage();o.loading=!0,e.then(function(){o.loading=!1},function(){})}},o.$on(a.events.wornAssetsChanged,function(e,t){v.a.forEach(o.items,function(e){o.$parent.updateItemSelected(e)})}),o.$on(a.events.menuClicked,function(e,t){var a,n=t.menu;g()&&n.assetType&&(a=o.isEmotesEnabled?r.getAssetTypeByName(n.assetType):o.getAssetTypeByName(n.assetType))&&(d.setPagingParameter("assetTypeId",a.id),m(),u())}),o.init=function(){o.recommendationsData={showRecommendations:!1},d.setPagingParameter("userId",f.CurrentUser.userId),m(),g()&&u()},o.initEmotes=function(e){o.isMenuOpen=e.isMenuOpen,o.selectedTab=e.selectedTab,o.selectedMenu=e.selectedMenu,o.selectedCategory=e.selectedCategory,o.selectedSubcategory=e.selectedSubcategory,o.isEmotesEnabled=!0;var t=[];void 0!==e.selectedItem&&null!==e.selectedItem&&t.push(e.selectedItem);var a=e.assetTypeInfo;a&&(d.setPagingParameter("assetTypeId",a.id),d.setPagingParameter("userId",f.CurrentUser.userId),m(),u(t))}}o.$inject=["$scope","$log","cursorPaginationService","avatarConstantService","avatarUrlConstants","$document","$q","avatarTypeService","recommendationsConstants"],s.a.controller("avatarItemsController",o),t.default=o},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(s,a,o,n,i,r){s.scales=r.getScales(),s.scaleProportionAndBodyTypeEnabled=!1,s.updateScales=function(){a.debug("updateScales"),r.updateScales(s.scales,s.scaleProportionAndBodyTypeEnabled);var e=r.getScales(),t={height:e.height.value/100,width:e.width.value/100,head:e.head.value/100};s.scaleProportionAndBodyTypeEnabled&&(t.proportion=e.proportion.value/100,t.bodyType=e.bodyType.value/100),n.setScales(t).then(function(e){s.refreshThumbnail()},function(){s.systemFeedback.error(i.scales.failedToUpdate)})},s.initializeScaleMetrics=function(e){var t=e.avatarRules,a=e.avatarDetails,n=e.metaData;s.scaleProportionAndBodyTypeEnabled=n.supportProportionAndBodyType&&t.proportionsAndBodyTypeEnabledForUser,r.initializeScaleMetrics(t,n,s.scaleProportionAndBodyTypeEnabled),o(function(){r.applyCurrentScale(a,s.scaleProportionAndBodyTypeEnabled)})},s.$watch(function(){return s.avatarDataModel.isAvatarScaleEmbeddedInTab},function(e,t){e&&s.avatarLibrary&&s.initializeScaleMetrics(s.avatarLibrary)},!0),s.$on(i.events.pageLoaded,function(e,t){s.initializeScaleMetrics(t)}),s.$on(i.events.avatarDetailsLoaded,function(e,t){r.applyCurrentScale(t,s.scaleProportionAndBodyTypeEnabled)})}s.$inject=["$scope","$log","$timeout","avatarService","avatarConstantService","avatarScaleService"],n.a.controller("avatarScaleController",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(a,t,n){function s(){a.avatarDataModel.scaleEnabled="R15"===a.avatarType}a.avatarType=n.avatarType.defaultOnPageLoad,a.avatarTypes=n.avatarType.avatarTypes,a.updateAvatarType=function(){var e=a.avatarType;s(),t.setAvatarType(e).then(function(e){a.refreshThumbnail()},function(){a.systemFeedback.error(n.avatarType.failedToUpdate)})},a.$on(n.events.avatarDetailsLoaded,function(e,t){a.avatarType=t.playerAvatarType,s()})}s.$inject=["$scope","avatarService","avatarConstantService"],n.a.controller("avatarTypeController",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(s,n,a,o,i,r,l,c){s.myBodyColors={headColorId:0,torsoColorId:0,rightArmColorId:0,leftArmColorId:0,rightLegColorId:0,leftLegColorId:0},s.currentColorId=null,s.bodyParts=[{label:o.bodyParts.all,name:"all"},{label:o.bodyParts.head,name:"headColorId"},{label:o.bodyParts.torso,name:"torsoColorId"},{label:o.bodyParts.leftArm,name:"leftArmColorId"},{label:o.bodyParts.rightArm,name:"rightArmColorId"},{label:o.bodyParts.leftLeg,name:"leftLegColorId"},{label:o.bodyParts.rightLeg,name:"rightLegColorId"}];var d=s.bodyParts[0],u=!1;function m(){s.currentColorId=function(e){var t=e.headColorId;return e.headColorId===t&&e.torsoColorId===t&&e.rightArmColorId===t&&e.leftArmColorId===t&&e.rightLegColorId===t&&e.leftLegColorId===t}(s.myBodyColors)?s.myBodyColors.headColorId:null}function g(){var e=o.googleAnalytics.closeLabel;u&&(e=o.googleAnalytics.saveLabel),i.fireEvent(o.googleAnalytics.category,o.googleAnalytics.advancedBodyColorsAction,e)}s.colorsPalette=[],s.advancedPalette=[],s.isColorSelected=function(e){return e.brickColorId===s.currentColorId},s.onColorDotClicked=function(e,t){return void 0===t&&(t=d),function(e,t){var a=t.brickColorId,n=s.myBodyColors;switch(e.name){case"all":n.headColorId=a,n.torsoColorId=a,n.leftArmColorId=a,n.rightArmColorId=a,n.leftLegColorId=a,n.rightLegColorId=a;break;case"headColorId":n.headColorId=a;break;case"torsoColorId":n.torsoColorId=a;break;case"leftArmColorId":n.leftArmColorId=a;break;case"rightArmColorId":n.rightArmColorId=a;break;case"leftLegColorId":n.leftLegColorId=a;break;case"rightLegColorId":n.rightLegColorId=a}m()}(t,e),u=!0,a.setBodyColors(s.myBodyColors).then(function(){r.$broadcast(o.events.bodyColorsChanged,s.myBodyColors),s.refreshThumbnail()},function(){s.systemFeedback.error(o.bodyColors.failedToUpdate)})},s.openAdvancedBodyColors=function(){n.debug("advanced body colors"),u=!1;var e=c.modals.advancedBodyColor.templateUrl,t={colorsPalette:s.advancedPalette,bodyParts:s.bodyParts,selectedBodyPart:d,onColorDotClicked:s.onColorDotClicked,isColorSelected:function(e){return function(e,t){return"all"===t.name?s.currentColorId===e:s.myBodyColors[t.name]===e}(e.brickColorId,t.selectedBodyPart)}},a={animation:!1,templateUrl:e,controller:c.modals.advancedBodyColor.controllerName,openedClass:c.modals.openedClass,resolve:{modalData:t}};l.open(a).result.then(function(){g()},function(){g()}),i.fireEvent(o.googleAnalytics.category,o.googleAnalytics.advancedBodyColorsAction,o.googleAnalytics.openLabel)},s.$on(o.events.avatarRulesLoaded,function(e,t){s.colorsPalette=t.basicBodyColorsPalette,s.advancedPalette=t.bodyColorsPalette}),s.$on(o.events.avatarDetailsLoaded,function(e,t){s.myBodyColors=t.bodyColors,m()})}s.$inject=["$scope","$log","avatarService","avatarConstantService","googleAnalyticsEventsService","$rootScope","$uibModal","avatarUrlConstants"],n.a.controller("bodyColorsController",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(o,e,a,t,n,s,i,r){o.emotesModalData=t,o.systemFeedback=t.systemFeedback;var l=s.emotes;function c(){o.selectedAssetId=null,o.hoveredPositionIndex=null,o.selectedPositionIndex=null,o.isRequestDelete=!1}function d(e,t){n.equipEmote(e,t).then(function(){a.debug("Updated emote"),o.systemFeedback.success(l.successfulUpdate),o.radialSlices[t]={isEmpty:!1,position:t,assetId:e},c()},function(e){o.systemFeedback.error(l.errorUpdatingEmote)})}o.radialSlices={},o.isRequestDelete=!1,o.selectedAssetId=t.selectedItem?t.selectedItem.id:null,o.selectedPositionIndex=null,o.hoveredPositionIndex=null,o.addItemThumbnailAndLink=t.addItemThumbnailAndLink,o.systemFeedback=t.systemFeedback,o.getAssetTypeByName=i.getAssetTypeByName,o.getAssetTypeName=i.getAssetTypeName,o.thumbnailTypes=r.thumbnailTypes,o.init=function(){n.getEmotes().then(function(e){for(var t=0;t<e.length;t++){var a=e[t].position,n=e[t].assetId;o.radialSlices[a]={isEmpty:!1,position:a,assetId:n}}for(var s=1;s<=8;s++)null!==o.radialSlices[s]&&void 0!==o.radialSlices[s]||(o.radialSlices[s]={isEmpty:!0,position:s,assetId:null})},function(e){o.systemFeedback.error(l.errorGettingEmotes)})},o.onEmotesPositionClick=function(e,t){null===o.selectedAssetId?null===o.selectedPositionIndex||o.selectedPositionIndex!==e?(o.selectedPositionIndex=e,o.isRequestDelete=!t):c():d(o.selectedAssetId,e)},o.onEmotesCardClick=function(e){null===o.selectedPositionIndex?null===o.selectedAssetId||o.selectedAssetId!==e?o.selectedAssetId=e:c():d(e,o.selectedPositionIndex)},o.confirmDelete=function(){null!==o.selectedPositionIndex&&(n.unequipEmote(o.selectedPositionIndex).then(function(){a.debug("Deleted emote"),o.systemFeedback.success(l.successfulDelete),o.radialSlices[o.selectedPositionIndex]={isEmpty:!0,position:o.selectedPositionIndex,assetId:null},c()},function(e){o.systemFeedback.error(l.errorDeletingEmote)}),o.isRequestDelete=!1)},o.onHoverPosition=function(e){o.hoveredPositionIndex=e},o.close=function(){e.dismiss()},o.resetHoveredPosition=function(){o.hoveredPositionIndex=o.selectedPositionIndex},o.init()}s.$inject=["$scope","$uibModalInstance","$log","modalData","avatarService","avatarConstantService","avatarTypeService","thumbnailConstants"],n.a.controller("emotesModalController",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(t,a,e,n){t.params=n,t.submit=function(){var e={outfitName:t.outfitName};a.close(e)},t.close=function(){a.dismiss()}}s.$inject=["$scope","$uibModalInstance","$log","modalData"],n.a.controller("outfitNameModalController",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(2),l=a.n(n),c=a(1),s=a(0);function o(s,a,o){s.loading=!1,s.items=[],s.isOutfitCostumeMessage=!0,s.appMeta={isI18nEnabled:c.Lang.AvatarResources||!1};var n=!0,i=1;s.emptyMessage=function(){return s.$parent.bundlesEnabledForUser?o.outfits.costumeMessages.emptyMessage:o.outfits.outfitMessages.emptyMessage};function r(){i=1,n=!0,s.loading=!1,s.items=[],s.getNextPage()}s.getNextPage=function(){function t(e){s.loading=!1;var t=null==e.filteredCount?0:e.filteredCount;n=e.data.length+t===50,i+=1,l.a.forEach(e.data,function(e){e.type="Outfit",s.addItemThumbnailAndLink(e)}),s.items=s.items.concat(e.data)}function e(){var e=s.$parent.bundlesEnabledForUser?o.outfits.costumeMessages.emptyMessage:o.outfits.outfitMessages.emptyMessage;s.systemFeedback.error(e.failedToLoadOutfits)}"Outfits"!==s.selectedTab.tabType&&"Costumes"!==s.selectedTab.tabType||!s.loading&&n&&(s.loading=!0,"Outfits"===s.selectedTab.tabType?a.getOutfits(s.avatarDataModel.userId,i,50,!0).then(function(e){t(e)},e):null!==s.selectedMenu&&("MyCostumes"===s.selectedMenu.name?a.getOutfits(s.avatarDataModel.userId,i,50,!0).then(function(e){t(e)},e):"PresetCostumes"===s.selectedMenu.name&&a.getOutfits(s.avatarDataModel.userId,i,50,!1).then(function(e){t(e)},e)))},s.$on(o.events.outfitsChanged,function(e,t){r()}),s.$on(o.events.outfitDeleted,function(e,a){l.a.forEach(s.items,function(e,t){e.id===a.id&&s.items.splice(t,1)})}),s.$on(o.events.menuClicked,function(e,t){var a=t.tab;if("Outfits"===a.name||"Costumes"===a.name){r();var n="Outfits"===a.name?"Outfit":"Costume";s.createNewOutfitLabel=o.outfits.createNewOutfit(n)}})}o.$inject=["$scope","avatarService","avatarConstantService"],s.a.controller("outfitsController",o),t.default=o},function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),s=a(0);function o(n,e,t){n.loading=!1,n.items=[],n.emptyMessage=t.recent.emptyMessage;var s="All",o=!1;function i(){"Recent"!==n.selectedTab.name||o||n.loading||(n.loading=!0,n.items=[],e.getRecentItems(s).then(function(e){n.items=[];for(var t=0;t<e.data.length;t++){var a=e.data[t];n.addItemThumbnailAndLink(a),n.updateItemSelected(a)}n.items=e.data,n.loading=!1,o=!0},function(){n.systemFeedback.error(t.recent.couldNotLoadList)}))}n.$on(t.events.wornAssetsChanged,function(e,t){r.a.forEach(n.items,function(e){n.$parent.updateItemSelected(e)})}),n.$on(t.events.outfitDeleted,function(e,a){r.a.forEach(n.items,function(e,t){e.id===a.id&&n.items.splice(t,1)})}),n.$on(t.events.menuClicked,function(e,t){var a=t.tab,n=t.menu;"Recent"===a.name&&(s=n.name,o=!1,i())}),n.$on(t.events.pageLoaded,function(e,t){i()})}o.$inject=["$scope","avatarService","avatarConstantService"],s.a.controller("recentItemsController",o),t.default=o},function(e,t,a){var n={"./avatarBackDirective.js":33,"./avatarBaseDirective.js":34,"./avatarEditorTabsDirective.js":35,"./avatarItemCardDirective.js":36,"./avatarItemsDirective.js":37,"./avatarScalingDirective.js":38,"./avatarTabContentDirective.js":39,"./avatarTabContentHeaderDirective.js":40,"./emotesItemCardDirective.js":41,"./loadingAnimatedDirective.js":42,"./onBlurDirective.js":43,"./onInputFinishedDirective.js":44,"./pageFocusDirective.js":45};function s(e){var t=o(e);return a(t)}function o(e){if(a.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(e.exports=s).id=32},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarBack}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarBack",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarBase}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarBase",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarEditorTabs}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarEditorTabs",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarItemCard}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarItemCard",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarItems}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarItems",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarScaling}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarScaling",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarTabContent}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarTabContent",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.avatarTabContentHeader}}s.$inject=["avatarUrlConstants"],n.a.directive("avatarTabContentHeader",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){return{restrict:"A",replace:!1,templateUrl:e.templates.emotesItemCard}}s.$inject=["avatarUrlConstants"],n.a.directive("emotesItemCard",s),t.default=s},function(e,t,a){"use strict";function n(){return{restrict:"A",replace:!1,templateUrl:"loading-animated"}}a.r(t),a(0).a.directive("loadingAnimated",n),t.default=n},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(i,r,l){return{restrict:"A",scope:{blurTarget:"=",onBlur:"&"},link:function(t,a,e){function n(e){0<a.has(e.target).length?r.debug("clicked inside element"):(r.debug("clicked outside element"),i.off("click touchstart",n),s.active=!1,t.$apply(),t.$apply(t.onBlur()))}var s=t.blurTarget,o=t.$watch("blurTarget.active",function(e){void 0!==s.active&&(s.active?(r.debug("binding click handler"),l(function(){i.on("click touchstart",n)},0)):(r.debug("unbinding click handler"),i.off("click touchstart",n)))});t.$on("$destroy",function(){o&&o(),i.off("click touchstart",n)})}}}s.$inject=["$document","$log","$timeout"],n.a.directive("onBlur",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(a){return{scope:{fn:"&onInputFinished"},restrict:"A",link:function(e,t){/Edge/.test(navigator.userAgent)&&t.is("input[type=range]")?(a.debug("Is Edge, using input event"),t.on("input",function(){a.debug("onInputFinished input"),e.$apply(e.fn())})):(a.debug("Is not Edge, using change event"),t.on("change",function(){a.debug("onInputFinished change"),e.$apply(e.fn())}))}}}s.$inject=["$log"],n.a.directive("onInputFinished",s),t.default=s},function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),s=a(5),i=a.n(s),r=a(0);function l(s){return{restrict:"A",scope:{focusGained:"&focusGained",focusLost:"&focusLost"},link:function(n,e,t){o.a.element(document).ready(function(){var a=null;i()(window).focus(function(){s.debug("Window focus");var e=(new Date).getTime();if(null!==a){var t=(e-a)/1e3;n.secondsIdle=t,n.focusGained({secondsIdle:t})}}),i()(window).blur(function(){s.debug("Window blur"),a=(new Date).getTime(),n.focusLost()})})}}}l.$inject=["$log"],r.a.directive("pageFocus",l),t.default=l},function(e,t,a){var n={"./orderObjectByFilter.js":47,"./percentageFilter.js":48,"./roundFilter.js":49};function s(e){var t=o(e);return a(t)}function o(e){if(a.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(e.exports=s).id=46},function(e,t,a){"use strict";a.r(t),a(0).a.filter("orderObjectBy",function(){return function(e,a){var t=[];return angular.forEach(e,function(e){t.push(e)}),t.sort(function(e,t){return e[a]>t[a]?1:-1}),t}})},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(a){return function(e,t){return a("number")(100*e,t)}}s.$inject=["$filter"],n.a.filter("percentage",s),t.default=s},function(e,t,a){"use strict";a.r(t),a(0).a.filter("round",function(){return function(e,t){return t*Math.round(e/t)}})},function(e,t,a){var n={"./avatarConstantService.js":51,"./avatarScaleService.js":52,"./avatarService.js":53,"./avatarTypeService.js":54};function s(e){var t=o(e);return a(t)}function o(e){if(a.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(e.exports=s).id=50},function(e,t,a){"use strict";a.r(t);var n=a(0);function s(e){var t=e;return{events:{avatarDetailsLoaded:"Roblox.Avatar.AvatarDetailsLoaded",avatarRulesLoaded:"Roblox.Avatar.AvatarRulesLoaded",menuClicked:"Roblox.Avatar.MenuClicked",outfitsChanged:"Roblox.Avatar.OutfitsChanged",outfitDeleted:"Roblox.Avatar.OutfitDeleted",wornAssetsChanged:"Roblox.Avatar.WornAssetsChanged",metaDataLoaded:"Roblox.Avatar.MetaDataLoaded",bodyColorsChanged:"Roblox.Avatar.BodyColorsChanged",pageLoaded:"Roblox.Avatar.PageLoaded"},page:{errorLoadingPage:t.get("Message.PageUnavailable"),idleRefreshTimeInSeconds:10},tabs:[{label:t.get("Heading.Recent"),name:"Recent",subCategoryMenu:[{name:"All",label:t.get("Heading.All")},{name:"Accessories",label:t.get("Heading.Accessories")},{name:"Clothing",label:t.get("Heading.Clothing")},{name:"BodyParts",label:t.get("Heading.BodyParts")},{name:"AvatarAnimations",label:t.get("Heading.Animations")},{name:"Outfits",label:t.get("Heading.Outfits")}]},{label:t.get("Heading.Clothing"),name:"Clothing",tabType:"Assets",menuType:"Nested",categoryRows:[{title:t.get("Heading.Accessories"),name:"Accessories",subCategoryMenu:[{name:"Hats",label:t.get("Label.Hat"),fullLabel:t.get("Label.HatAccessories"),assetType:"Hat"},{name:"Hair",label:t.get("Label.Hair"),fullLabel:t.get("Label.HairAccessories"),assetType:"Hair Accessory"},{name:"Face",label:t.get("Label.Face"),fullLabel:t.get("Label.FaceAccessories"),assetType:"Face Accessory"},{name:"Neck",label:t.get("Label.Neck"),fullLabel:t.get("Label.NeckAccessories"),assetType:"Neck Accessory"},{name:"Shoulder",label:t.get("Label.Shoulders"),fullLabel:t.get("Label.ShoulderAccessories"),assetType:"Shoulder Accessory"},{name:"Front",label:t.get("Label.Front"),fullLabel:t.get("Label.FrontAccessories"),assetType:"Front Accessory"},{name:"Back",label:t.get("Label.Back"),fullLabel:t.get("Label.BackAccessories"),assetType:"Back Accessory"},{name:"Waist",label:t.get("Label.Waist"),fullLabel:t.get("Label.WaistAccessories"),assetType:"Waist Accessory"}]},{title:t.get("Label.Clothes"),name:"Clothing",subCategoryMenu:[{name:"Shirts",label:t.get("Label.Shirts"),assetType:"Shirt"},{name:"Pants",label:t.get("Label.Pants"),assetType:"Pants"},{name:"T-Shirts",label:t.get("Label.TShirts"),assetType:"T-Shirt"}]},{title:t.get("Label.Gear"),name:"Gear",subCategoryMenu:[{name:"Gear",label:t.get("Label.Gear"),assetType:"Gear"}]}]},{label:t.get("Heading.Body"),name:"Body",tabType:"Assets",menuType:"Nested",categoryRows:[{title:t.get("Label.Parts"),name:"BodyParts",subCategoryMenu:[{name:"Face",label:t.get("Label.Face"),assetType:"Face",fullLabel:t.get("Label.Faces")},{name:"Head",label:t.get("Label.Head"),assetType:"Head",fullLabel:t.get("Label.Heads")},{name:"Torso",label:t.get("Label.Torso"),assetType:"Torso",fullLabel:t.get("Label.Torsos")},{name:"LeftArms",label:t.get("Label.LeftArms"),assetType:"Left Arm",fullLabel:t.get("Label.LeftArms")},{name:"RightArms",label:t.get("Label.RightArms"),assetType:"Right Arm",fullLabel:t.get("Label.RightArms")},{name:"LeftLegs",label:t.get("Label.LeftLegs"),assetType:"Left Leg",fullLabel:t.get("Label.LeftLegs")},{name:"RightLegs",label:t.get("Label.RightLegs"),assetType:"Right Leg",fullLabel:t.get("Label.RightLegs")}]},{title:t.get("Heading.Appearance"),name:"Appearance",subCategoryMenu:[{name:"BodyColors",label:t.get("Label.SkinTone")},{name:"Scale",label:t.get("Label.Scale"),visible:!1}]},{title:t.get("Heading.Packages"),name:"Packages",subCategoryMenu:[{name:"Package",label:t.get("Heading.Packages"),assetType:"Package",fullLabel:t.get("Heading.Packages")}]}]},{label:t.get("Heading.Animations"),name:"AvatarAnimations",tabType:"Assets",subCategoryMenu:[{name:"Emote",label:t.get("Heading.Emotes"),fullLabel:t.get("Heading.Emotes"),assetType:"Emote Animation",visible:!1},{name:"Walk",label:t.get("Label.Walk"),fullLabel:t.get("Label.WalkAnimations"),assetType:"Walk Animation"},{name:"Run",label:t.get("Label.Run"),fullLabel:t.get("Label.RunAnimations"),assetType:"Run Animation"},{name:"Fall",label:t.get("Label.Fall"),fullLabel:t.get("Label.FallAnimations"),assetType:"Fall Animation"},{name:"Jump",label:t.get("Label.Jump"),fullLabel:t.get("Label.JumpAnimations"),assetType:"Jump Animation"},{name:"Swim",label:t.get("Label.Swim"),fullLabel:t.get("Label.SwimAnimations"),assetType:"Swim Animation"},{name:"Climb",label:t.get("Label.Climb"),fullLabel:t.get("Label.ClimbAnimations"),assetType:"Climb Animation"},{name:"Idle",label:t.get("Label.Idle"),fullLabel:t.get("Label.IdleAnimations"),assetType:"Idle Animation"}]},{label:t.get("Heading.Outfits"),name:"Outfits",tabType:"Outfits",subCategoryMenu:[],noSubCategoryMenu:!0,visible:!0},{label:t.get("Heading.Costumes"),name:"Costumes",tabType:"Costumes",visible:!1,subCategoryMenu:[{name:"PresetCostumes",label:t.get("Label.PresetCostumes"),fullLabel:t.get("Label.PresetCostumes")},{name:"MyCostumes",label:t.get("Label.MyCostumes"),fullLabel:t.get("Label.MyCostumes")}]}],thumbnail:{redrawFloodchecked:t.get("Message.RedrawFloodchecked"),redrawThumbnailFailed:t.get("Message.RedrawThumbnailFailed"),waitForThumbnailRegenerationInSeconds:30,useThreeDeeThumbsKey:"RobloxUse3DThumbnailsV2",threeDeeButton:t.get("Action.ThreeDimensions"),twoDeeButton:t.get("Action.TwoDimensions")},recent:{couldNotLoadList:t.get("Message.FailedLoadRecent"),emptyMessage:t.get("Message.EmptyRecentItems")},outfits:{createNewOutfit:function(e){return"Outfit"===e?t.get("Heading.CreateNewOutfit"):t.get("Heading.CreateNewCostume")},outfitMessages:{renameOutfitTitle:t.get("Heading.RenameOutfit"),renameOutfitDescription:t.get("Description.RenameOutfit"),renameOutfitButton:t.get("Action.Rename"),createOutfitTitle:t.get("Heading.CreateNewOutfit"),createOutfitDescription:t.get("Description.CreateNewOutfit"),createOutfitButton:t.get("Action.CreateNewOutfit"),successfulRename:t.get("Message.SuccessRenameOutfit"),successfulDelete:t.get("Message.SuccessDeleteOutfit"),successfulUpdate:t.get("Message.SuccessUpdatedOutfit"),successfulCreate:t.get("Message.SuccessCreateOutfit"),successfulWear:t.get("Message.SuccessWoreOutfit"),emptyMessage:t.get("Message.EmptyListOfOutfits"),maxNumberOfOutfits:t.get("Message.ReachedMaxOutfits"),errorCreatingOutfit:t.get("Message.ErrorCreateOutfit"),invalidOutfitName:t.get("Message.InvalidOutfitName"),updateFailedOutfitDelete:t.get("Message.FailedUpdateDeletedOutfit"),errorUpdatingOutfit:t.get("Message.ErrorUpdateOutfit"),errorDeletingOutfit:t.get("Message.FailedDeleteOutfit"),errorRenamingOutfit:t.get("Message.ErrorRenameOutfit"),errorWearingOutfit:t.get("Message.ErrorWearOutfit"),failedToLoadOutfits:t.get("Message.ErrorLoadOutfits"),nameInputPlaceholder:t.get("Label.NamePlaceholderOutfit")},costumeMessages:{renameOutfitTitle:t.get("Heading.RenameCostume"),renameOutfitDescription:t.get("Description.RenameCostume"),renameOutfitButton:t.get("Action.Rename"),createOutfitTitle:t.get("Heading.CreateNewCostume"),createOutfitDescription:t.get("Description.CreateNewCostume"),createOutfitButton:t.get("Action.CreateNewOutfit"),successfulRename:t.get("Message.SuccessRenameCostume"),successfulDelete:t.get("Message.SuccessDeleteCostume"),successfulUpdate:t.get("Message.SuccessUpdatedCostume"),successfulCreate:t.get("Message.SuccessCreateCostume"),successfulWear:t.get("Message.SuccessWoreCostume"),emptyMessage:t.get("Message.EmptyListOfCostumes"),maxNumberOfOutfits:t.get("Message.ReachedMaxCostumes"),errorCreatingOutfit:t.get("Message.ErrorCreateCostume"),invalidOutfitName:t.get("Message.InvalidOutfitName"),updateFailedOutfitDelete:t.get("Message.FailedUpdateDeletedCostume"),errorUpdatingOutfit:t.get("Message.ErrorUpdateCostume"),errorDeletingOutfit:t.get("Message.FailedDeleteCostume"),errorRenamingOutfit:t.get("Message.ErrorRenameCostume"),errorWearingOutfit:t.get("Message.ErrorWearCostume"),failedToLoadOutfits:t.get("Message.ErrorLoadCostume"),nameInputPlaceholder:t.get("Label.NamePlaceholderCostume")},countNumbersInEnglish:["zero","one","two","three","four","five"],missingItemsFromOutfit:function(e){return t.get("Message.MissingItemsFromOutfit",{number:e})},menuOptions:[{label:t.get("Action.Update"),name:"Update"},{label:t.get("Action.Rename"),name:"Rename"},{label:t.get("Action.Delete"),name:"Delete"},{label:t.get("Action.Cancel"),name:"Cancel"}],outfitErrorCodes:{maxOutfits:1,invalidBodyColors:3,invalidOutfitName:4,unwearableAsset:5,internalError:6}},packages:{errorWearingPackage:t.get("Message.FailedWearPackage")},assets:{savedAdvancedAccessories:t.get("Message.SuccessSavedAccessories"),emptyMessage:function(e){return t.get("Message.EmptyListForItem",{itemType:e})},couldNotLoadList:t.get("Message.FailedLoadAssets"),errorUpdatingItems:t.get("Message.ErrorUpdateWorn"),maxAccessories:10},scales:{failedToUpdate:t.get("Message.FailedUpdateScales")},avatarType:{failedToUpdate:t.get("Message.FailedUpdateType"),defaultOnPageLoad:"R15",avatarTypes:["R6","R15"]},bodyColors:{failedToUpdate:t.get("Message.FailedUpdateBodyColor"),palette:[{brickColorId:364,hexColor:"#5A4C42"},{brickColorId:217,hexColor:"#7C5C46"},{brickColorId:359,hexColor:"#AF9483"},{brickColorId:18,hexColor:"#CC8E69"},{brickColorId:125,hexColor:"#EAB892"},{brickColorId:361,hexColor:"#564236"},{brickColorId:192,hexColor:"#694028"},{brickColorId:351,hexColor:"#BC9B5D"},{brickColorId:352,hexColor:"#C7AC78"},{brickColorId:5,hexColor:"#D7C59A"},{brickColorId:153,hexColor:"#957977"},{brickColorId:1007,hexColor:"#A34B4B"},{brickColorId:101,hexColor:"#DA867A"},{brickColorId:1025,hexColor:"#FFC9C9"},{brickColorId:330,hexColor:"#FF98DC"},{brickColorId:135,hexColor:"#74869D"},{brickColorId:305,hexColor:"#527CAE"},{brickColorId:11,hexColor:"#80BBDC"},{brickColorId:1026,hexColor:"#B1A7FF"},{brickColorId:321,hexColor:"#A75E9B"},{brickColorId:107,hexColor:"#008F9C"},{brickColorId:310,hexColor:"#5B9A4C"},{brickColorId:317,hexColor:"#7C9C6B"},{brickColorId:29,hexColor:"#A1C48C"},{brickColorId:105,hexColor:"#E29B40"},{brickColorId:24,hexColor:"#F5CD30"},{brickColorId:334,hexColor:"#F8D96D"},{brickColorId:199,hexColor:"#635F62"},{brickColorId:1002,hexColor:"#CDCDCD"},{brickColorId:1001,hexColor:"#F8F8F8"}]},bodyParts:{all:t.get("Label.All"),head:t.get("Label.Head"),torso:t.get("Label.Torso"),leftArm:t.get("Label.LeftArm"),rightArm:t.get("Label.RightArm"),leftLeg:t.get("Label.LeftLeg"),rightLeg:t.get("Label.RightLeg")},bodyScaling:{height:t.get("Label.Height"),width:t.get("Label.Width"),head:t.get("Label.Head"),bodyType:t.get("Label.BodyType"),proportions:t.get("Label.Proportions")},bodyScalingType:{height:"Height",width:"Width",head:"Head",bodyType:"BodyType",proportions:"Proportions"},googleAnalytics:{category:"AvatarPage",advancedAccessoriesAction:"AdvancedAccessories",advancedBodyColorsAction:"AdvancedBodyColors",openLabel:"Open",closeLabel:"Close",saveLabel:"Save",saveFailedLabel:"SaveFailed"},defaultClothing:{wearClothing:t.get("Message.DefaultClothing"),displayTimeInMilliseconds:5e3},modalLayout:{outfitUpdate:{titlePrefix:function(e){return"Outfit"===e?t.get("Heading.UpdateOutfit"):t.get("Heading.UpdateCostume")},bodyText:function(e){return"Outfit"===e?t.get("Message.UpdateThisOutfit"):t.get("Message.UpdateThisCostume")},confirmBtnName:t.get("Action.Update"),cancelBtnName:t.get("Action.Cancel"),confirmBtnId:"purchaseConfirm"},outfitDelete:{titlePrefix:function(e){return"Outfit"===e?t.get("Heading.DeleteOutfit"):t.get("Heading.DeleteCostume")},bodyText:function(e){return"Outfit"===e?t.get("Message.DeleteThisOutfit"):t.get("Message.DeleteThisCostume")},confirmBtnName:t.get("Action.Delete"),cancelBtnName:t.get("Action.Cancel"),confirmBtnId:"purchaseConfirm"},advancedAccessoriesDoubleCheck:{title:t.get("Heading.AccessoriesChange"),bodyText:t.get("Message.AccessoriesChange"),confirmBtnName:t.get("Action.Save"),cancelBtnName:t.get("Action.Cancel")}},emotes:{assetType:"Emote Animation",emotesInstructions:t.get("Message.EmotesInstructions"),successfulDelete:t.get("Message.SuccessUnequipEmote"),successfulUpdate:t.get("Message.SuccessEquipEmote"),errorUpdatingEmote:t.get("Message.ErrorEquipEmote"),errorDeletingEmote:t.get("Message.ErrorDeleteEmote"),errorGettingEmotes:t.get("Message.ErrorLoadEmotes")}}}s.$inject=["languageResource"],n.a.factory("avatarConstantService",s),t.default=s},function(e,t,a){"use strict";a.r(t);var i=a(1),n=a(0);function s(s){function o(e,t){t.min=100*e.min,t.max=100*e.max}return{scales:{height:{label:s.bodyScaling.height,min:0,max:100,value:100,increment:5,type:s.bodyScalingType.height},width:{label:s.bodyScaling.width,min:0,max:100,value:100,increment:5,type:s.bodyScalingType.width},head:{label:s.bodyScaling.head,min:0,max:100,value:100,increment:5,type:s.bodyScalingType.head}},getScales:function(){return this.scales},applyCurrentScale:function(e,t){this.scales.height.value=100*e.scales.height,this.scales.width.value=100*e.scales.width,this.scales.head.value=100*e.scales.head,t&&(this.scales.proportion.value=100*e.scales.proportion,this.scales.bodyType.value=100*e.scales.bodyType)},updateScales:function(e,t){this.scales.height.value=e.height.value,this.scales.width.value=e.width.value,this.scales.head.value=e.head.value,t&&(this.scales.proportion.value=e.proportion.value,this.scales.bodyType.value=e.bodyType.value)},initializeScaleMetrics:function(e,t,a,n){a&&(this.scales.bodyType={label:i.Lang.AvatarResources["Label.BodyType"],min:0,max:100,value:0,increment:5,type:s.bodyScalingType.bodyType},this.scales.proportion={label:s.bodyScaling.proportions,min:0,max:100,value:0,increment:5,type:s.bodyScalingType.proportions}),this.scales.height.increment=100*t.scaleHeightIncrement,this.scales.width.increment=100*t.scaleWidthIncrement,this.scales.head.increment=100*t.scaleHeadIncrement,o(e.scales.height,this.scales.height),o(e.scales.width,this.scales.width),o(e.scales.head,this.scales.head),a&&(o(e.scales.proportion,this.scales.proportion),o(e.scales.bodyType,this.scales.bodyType))}}}s.$inject=["avatarConstantService"],n.a.factory("avatarScaleService",s),t.default=s},function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(0);function s(n,i,e){var a=c.EnvironmentUrls.avatarApi,s=c.EnvironmentUrls.catalogApi,r=e.avatarApi,t=e.catalogApi;e.www;function l(e,t){return a+c.Endpoints.generateAbsoluteUrl(e,t,!0)}function o(e,t){return s+c.Endpoints.generateAbsoluteUrl(e,t,!0)}return{avatarApi:function(e,t){return this.avatarDomain+c.Endpoints.generateAbsoluteUrl(e,t,!0)},getOutfitDetails:function(e){var t={url:l(r.getOutfitDetailsUrl,{id:e})};return i.httpGet(t,{})},createOutfit:function(e,t,a){var n={url:l(r.createOutfitUrl),withCredentials:!0},s={name:e,bodyColors:t,assetIds:a};return i.httpPost(n,s)},patchOutfit:function(e,t){n.debug("Patch outfit");var a={url:l(r.patchOutfitUrl,{id:e}),withCredentials:!0};return i.httpPatch(a,t)},deleteOutfit:function(e){var t={url:l(r.deleteOutfitUrl,{id:e}),withCredentials:!0};return i.httpPost(t,{})},getOutfits:function(e,t,a,n){var s={url:l(r.getOutfitsUrl,{userId:e}),retryable:!0},o={itemsPerPage:a,page:t,isEditable:n};return i.httpGet(s,o)},setBodyColors:function(e){var t={url:l(r.setBodyColorsUrl),withCredentials:!0};return i.httpPost(t,e)},setWearingAssets:function(e){var t={url:l(r.setWearingAssetsUrl),withCredentials:!0},a={assetIds:e};return i.httpPost(t,a)},wearAsset:function(e){var t={url:l(r.wearAssetUrl,{id:e}),withCredentials:!0};return i.httpPost(t,{})},removeAsset:function(e){var t={url:l(r.removeAssetUrl,{id:e}),withCredentials:!0};return i.httpPost(t,{})},wearOutfit:function(e){var t={url:l(r.wearOutfitUrl,{id:e}),withCredentials:!0};return i.httpPost(t,{})},getAvatar:function(e){void 0===e&&(e=!0);var t={url:l(r.getAvatarUrl),withCredentials:!0,retryable:e};return i.httpGet(t,{})},getRules:function(){var e={url:l(r.getAvatarRulesUrl)};return i.httpGet(e,{})},setScales:function(e){var t={url:l(r.setScalesUrl),withCredentials:!0};return i.httpPost(t,e)},setAvatarType:function(e){var t={url:l(r.setAvatarTypeUrl),withCredentials:!0},a={playerAvatarType:e};return i.httpPost(t,a)},getRecentItems:function(e){var t={url:l(r.getRecentItemsUrl,{type:e}),withCredentials:!0,retryable:!0};return i.httpGet(t,{})},redrawThumbnail:function(){var e={url:l(r.redrawThumbnailUrl),withCredentials:!0,retryable:!1};return i.httpPost(e,{})},getMetaData:function(e){void 0===e&&(e=!0);var t={url:l(r.getMetaData),withCredentials:!0,retryable:e};return i.httpGet(t,{})},getCategories:function(){var e={url:o(t.getCategories)};return i.httpGet(e,{})},getSubcategories:function(){var e={url:o(t.getSubcategories)};return i.httpGet(e,{})},getEmotes:function(){var e={url:l(r.getEmotesUrl)};return i.httpGet(e,{})},equipEmote:function(e,t){var a={url:l(r.equipEmoteUrl,{assetId:e,position:t})};return i.httpPost(a)},unequipEmote:function(e){var t={url:l(r.unequipEmoteUrl,{position:e})};return i.httpDelete(t)}}}s.$inject=["$log","httpService","avatarUrlConstants"],n.a.factory("avatarService",s),t.default=s},function(e,t,a){"use strict";function n(){return{assetTypeLookup:{},assetTypeNameLookup:{},setAssetTypeLookups:function(e){for(var t=0;t<e.length;t++){var a=e[t];this.assetTypeLookup[a.id]=a,this.assetTypeNameLookup[a.name]=a}},getAssetTypeName:function(e){var t=this.assetTypeLookup[e];return t&&t.name?t.name:null},getAssetTypeByName:function(e){return this.assetTypeNameLookup[e]}}}a.r(t),a(0).a.factory("avatarTypeService",n),t.default=n},function(e,t,a){var n={"./controllers/templates/advancedAccessoriesModal.html":56,"./controllers/templates/advancedBodyColorsModal.html":57,"./controllers/templates/emotesModal.html":58,"./controllers/templates/outfitNameModal.html":59,"./directives/templates/avatarBack.html":60,"./directives/templates/avatarBase.html":61,"./directives/templates/avatarEditorTabs.html":62,"./directives/templates/avatarItemCard.html":63,"./directives/templates/avatarItemsList.html":64,"./directives/templates/avatarScaling.html":65,"./directives/templates/avatarTabContent.html":66,"./directives/templates/avatarTabContentHeader.html":67,"./directives/templates/emotesItemCard.html":68,"./directives/templates/loadingAnimated.html":69};function s(e){var t=o(e);return a(t)}function o(e){if(a.o(n,e))return n[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}s.keys=function(){return Object.keys(n)},s.resolve=o,(e.exports=s).id=55},function(e,t){e.exports='<div class="modal-content advanced-modal"> <div class="modal-header"> <button type="button" class="close" ng-click="close()"> <span aria-hidden="true"><span class="icon-close"></span></span><span class="sr-only">{{ "Action.Close" | translate }}</span> </button> <h5>{{ "Heading.AdvancedOptions" | translate }}</h5> </div> <div class="modal-body"> <div ng-repeat="slot in params.advancedAccessorySlots" ng-class="{\'form-has-error\': !slot.valid}" class="advanced-accessory-group form-group"> <input ng-model="slot.id" ng-change="params.onChange(slot)" class="form-control input-field" placeholder="{{ \'Label.AssetIDPlaceholder\' | translate }}"/> </div> </div> <div class="modal-footer"> <button class="btn-secondary-md btn-min-width" ng-click="params.onSaveClick(submit)">{{ "Action.Save" | translate }}</button> <button class="btn-control-md btn-min-width" ng-click="close()">{{ "Action.Cancel" | translate }}</button> </div> </div>'},function(e,t){e.exports='<div id="advanced-body-colors" class="advanced-modal modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="close()"> <span aria-hidden="true"><span class="icon-close"></span></span><span class="sr-only">{{"Action.Close" | translate}}</span> </button> <h5>{{ "Heading.SkinToneBodyParts" | translate}}</h5> </div> <div class="modal-body"> <div class="bodycolors-radio-list"> <div ng-repeat="bodyPart in params.bodyParts" class="radio"> <input type="radio" ng-model="params.selectedBodyPart" name="radio1" id="radio-{{bodyPart.name}}" ng-value="bodyPart"/> <label for="radio-{{bodyPart.name}}">{{bodyPart.label}}</label> </div> </div> <div class="bodycolors-list-sm"> <div ng-repeat="bodyColor in params.colorsPalette" class="color-dot" ng-click="params.onColorDotClicked(bodyColor, params.selectedBodyPart)" ng-class="{active: params.isColorSelected(bodyColor)}" ng-style="{\'background-color\': bodyColor.hexColor}"></div> </div> </div> <div class="modal-footer"> <button class="btn-control-md btn-min-width" ng-click="close()">{{ "Action.Done" | translate }}</button> </div> </div>'},function(e,t){e.exports='<div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="close()"> <span aria-hidden="true"><span class="icon-close"></span></span><span class="sr-only">{{ "Action.Close" | translate }}</span> </button> <h5>{{ "Heading.EquipEmotes" | translate }}</h5> </div> <div class="modal-body"> <div class="emotes-radial-menu" ng-mouseleave="resetHoveredPosition()"> <div class="emotes-radial-background-layer"> <div ng-show="hoveredPositionIndex !== null" ng-class="[(\'emotes-radial-slice-\' + (hoveredPositionIndex - 1)), {\'\' : hoveredPositionIndex !== null}]" class="emotes-radial-selected-position-image"> </div> <div class="emotes-radial-img"></div> <div ng-show="selectedAssetId === null && selectedPositionIndex === null" class="text-emphasis emotes-radial-middle-text emotes-center-div"> {{ "Message.ChooseEmoteSlotOrEmote" | translate }} </div> <div ng-show="selectedAssetId === null && selectedPositionIndex !== null" class="text-emphasis emotes-radial-middle-text emotes-center-div"> {{ "Message.ChooseEmote" | translate }} </div> <div ng-show="selectedAssetId !== null && selectedPositionIndex === null" class="text-emphasis emotes-radial-middle-text emotes-center-div"> {{ "Message.ChooseEmoteSlot" | translate }} </div> </div> <div class="emotes-radial-menu-offset"> <div ng-repeat="(key, slice) in radialSlices | orderObjectBy:\'position\'" class="emotes-radial-slice-container"> <div class="text-emphasis emotes-radial-slice emotes-radial-slice-{{ $index }}"> <div ng-click="onEmotesPositionClick(slice.position, slice.isEmpty)" ng-mouseover="onHoverPosition(slice.position)" class="emotes-radial-button"> <div ng-if="!slice.isEmpty" class="emotes-radial-icon emotes-radial-inverse-{{ $index }}"> <thumbnail-2d class="emotes-radial-thumb" ng-class="{\'slice-is-hovered\' : hoveredPositionIndex === slice.position}" thumbnail-type="thumbnailTypes.assetThumbnail" thumbnail-target-id="slice.assetId"></thumbnail-2d> </div> <div class="emotes-radial-index emotes-radial-inverse-{{ $index }}">{{ slice.position }}</div> <div ng-show="selectedPositionIndex === slice.position || (selectedAssetId !== null && hoveredPositionIndex === slice.position)" class="emotes-on-state-icon"></div> </div> </div> </div> </div> </div> <div> <div> {{ "Label.YourEmotes" | translate }} </div> <div class="emotes-grid"> <div ng-controller="avatarItemsController" ng-init="initEmotes(emotesModalData)"> <div class="items-list" infinite-scroll="getNextPage()"> <ul class="hlist item-cards-stackable"> <li ng-show="isRequestDelete" class="list-item item-card delete-confirmation-card" ng-click="confirmDelete()"> <div class="item-card-container"> <div class="item-card-link"> <div class="item-card-thumb-container"> <div class="emotes-center-div"> <div class="icon-close"></div> </div> </div> </div> </div> </li> <li ng-repeat="item in items" class="list-item item-card"> <div emotes-item-card></div> </li> </ul> </div> <div ng-show="loading" loading-animated></div> <div ng-show="!loading && items.length === 0" class="col-xs-12 section-content-off"> {{ emptyMessage }} </div> </div> </div> </div> </div> <div class="modal-footer"> </div> </div>'},function(e,t){e.exports='<div class="modal-content"> <div class="modal-header"> <button type="button" class="close" ng-click="close()"> <span aria-hidden="true"><span class="icon-close"></span></span> <span class="sr-only">{{ "Action.Close" | translate }}</span> </button> <h5>{{ params.title }}</h5> </div> <form name="nameForm"> <div class="modal-body"> <p class="font-caption-header text-description">{{ params.description }}</p> <div ng-class="{\'form-has-error\': nameForm.outfitName.$invalid && !nameForm.outfitName.$pristine, \'form-has-feedback\': nameForm.outfitName.$valid && !nameForm.outfitName.$pristine }" id="outfit-name-group" class="form-group"> <input name="outfitName" type="text" focus-me="true" ng-model="outfitName" ng-pattern="/^[A-Z0-9 ]+$/i" required class="form-control input-field" placeholder="{{ params.nameInputPlaceholder }}" autocomplete="off"/> <p ng-class="{\'invisible\': !nameForm.outfitName.$invalid || nameForm.outfitName.$pristine }" class="form-control-label">{{ "Message.ErrorOutfitName" | translate }}</p> </div> </div> <div class="modal-footer"> <button ng-disabled="nameForm.$invalid || nameForm.outfitName.$pristine" class="btn-secondary-md btn-min-width" ng-click="submit()" id="submit">{{ params.buttonName }}</button> <button class="btn-control-md btn-min-width" ng-click="close()">{{ "Action.Cancel" | translate }}</button> </div> </form> </div>'},function(e,t){e.exports='<div class="avatar-back"> <div ng-controller="avatarTypeController" ng-class="{ \'invisible\': !pageLoaded}" class="avatar-type-toggle pill-toggle" data-toggle="tooltip" title="{{ \'Label.SwitchAvatarType\' | translate }}"> <input type="radio" ng-model="avatarType" id="radio-R6" value="R6" ng-change="updateAvatarType()"/> <label for="radio-R6">R6</label> <input type="radio" ng-model="avatarType" id="radio-R15" value="R15" ng-change="updateAvatarType()"/> <label for="radio-R15">R15</label> </div> <div ng-show="(selectedMenu.name === \'Hats\')" class="hat-slots"> <div title="{{ \'Message.HatLimitTooltip\' | translate }}" ng-repeat="slot in hatSlots" class="hat-slot"> <thumbnail-2d ng-if="!slot.empty" ng-click="onHatSlotClicked(slot)" thumbnail-target-id="slot.id" thumbnail-type="slot.thumbnailType"> </thumbnail-2d> </div> </div> <div class="avatar-thumbnail" ng-class="{\'slots-visible\': (selectedMenu.name === \'Hats\')}"> <div id="UserAvatar" class="3d-thumbs-enabled thumbnail-holder delayed-thumbnail-holder" ng-class="{\'3d-thumbs-enabled\': avatarDataModel.areThreeDeeThumbsEnabled}"> <thumbnail-3d ng-if="!isThumbnailLoading && threeDToggleData.is3d " target-id="avatarDataModel.userId" on-success="avatarDataModel.on3dAvatarSuccess" on-failure="avatarDataModel.on3dAvatarFailure"> </thumbnail-3d> <thumbnail-2d ng-if="!isThumbnailLoading && !threeDToggleData.is3d" thumbnail-target-id="avatarDataModel.userId" thumbnail-type="avatarDataModel.thumbnailType" thumbnail-options="avatarDataModel.thumbnailOptions" on-success="avatarDataModel.on2dAvatarSuccess" on-failure="avatarDataModel.on2dAvatarFailure"> </thumbnail-2d> <div ng-if="isThumbnailLoading" class="thumbnail-loader"><span class="spinner spinner-default"></span></div> <span class="toggle-three-dee btn-control btn-control-small" ng-click="toggleThreeDee()">{{ threeDToggleData.avatarToggleButton }}</span> </div> </div> <div toast toast-layout="toastLayout"></div> </div> '},function(e,t){e.exports='<div ng-controller="avatarController"> <div page-focus focus-gained="pageFocused(secondsIdle)"></div> <div class="alert-system-feedback"> <div class="alert alert-warning"> <span class="alert-context">{{ "Message.Warning" | translate }}</span> <span id="close" class="icon-close-white"></span> </div> </div> <div class="alert-system-feedback"> <div class="alert alert-loading">{{ "Message.Loading" | translate }}</div> </div> <div class="alert-system-feedback"> <div class="alert alert-success">{{ "Message.Success" | translate }}</div> </div> <div class="avatar-editor-header"> <h1>{{ "Heading.AvatarPageTitle" | translate }}</h1> <div class="catalog-header"> <div>{{ "Label.ExploreAvatarShop" | translate }}</div> <a ng-href="{{avatarDataModel.catalogPageUrl}}" class="btn-primary-md">{{ "Action.GetMore" | translate }}</a> </div> </div> <div class="left-wrapper-placeholder"> <div class="left-wrapper"> <div class="section-content remove-panel"> <div avatar-back></div> <div ng-controller="avatarScaleController" ng-if="avatarDataModel.isBodyTypeScaleOutOfTab" class="section-sliders"> <div ng-class="{ \'invisible\': !$parent.pageLoaded }" class="scale-container"> <div class="text-label font-subheader-1">{{scales.bodyType.label}}</div> <div class="scale-label font-body">{{ (scales.bodyType.value / 100) | percentage:0 }}%</div> <input type="range" on-input-finished="updateScales()" class="pr{{ (scales.bodyType.value-scales.bodyType.min) / (scales.bodyType.max-scales.bodyType.min) | percentage:0 | round:4 }}" id="{{scales.bodyType.label | lowercase}}-scale" ng-disabled="!avatarDataModel.scaleEnabled" step="{{scales.bodyType.increment}}" min="{{scales.bodyType.min}}" max="{{scales.bodyType.max}}" ng-model="scales.bodyType.value"/> </div> </div> <div avatar-scaling ng-if="!avatarDataModel.isAvatarScaleEmbeddedInTab"></div> </div> <div class="redraw-avatar"> <span ng-hide="redrawFloodchecked">{{ "Label.AskIfLoadingCorrectly" | translate }}</span> <span ng-show="redrawFloodchecked">{{ "Label.RedrawUnavailable" | translate }}</span> <a ng-disabled="redrawFloodchecked" ng-click="redrawThumbnail()" class="text-link">{{ "Action.Redraw" | translate }}</a> </div> </div> </div> <div ng-if="!pageLoaded" class="col-xs-8 right-panel"> <div loading-animated></div> </div> <div class="col-xs-8 right-panel" ng-class="{ \'invisible\': !pageLoaded}"> <div class="right-wrapper-placeholder"> <div class="right-wrapper" avatar-editor-tabs></div> </div> <div class="tab-content rbx-tab-content"> <div id="tab-content-top"></div> <div avatar-tab-content-header></div> <div avatar-tab-content class="tab-content"></div> </div> </div> </div> '},function(e,t){e.exports='<div ng-mouseleave="mouseLeftTabMenu()" class="tab-wrapper"> <div class="rbx-tabs-horizontal"> <ul id="horizontal-tabs" class="nav nav-tabs" role="tablist"> <li blur-target="tab" on-blur="onTabBlur(tab)" class="rbx-tab" ng-repeat="tab in tabs" ng-hide="tab.visible === false" ng-class="{\'active\': ((tab === selectedTab && !(tabWithOpenMenu && tabWithOpenMenu.active)) || tab.active)}"> <a ng-mouseover="onTabHover(tab)" ng-click="onTabClick(tab)" class="rbx-tab-heading" id="{{ tab.label | lowercase }}-dropdown"> <span class="text-lead">{{ tab.label }}<span ng-hide="(tab.subCategoryMenu.length === 0)" class="icon-down"></span></span> </a> </li> </ul> </div> <div ng-show="isMenuOpen && tabWithOpenMenu !== null && (tabWithOpenMenu.subCategoryMenu.length > 0 || tabWithOpenMenu.categoryRows.length > 0)" class="tab-horizontal-submenu section-content"> <div ng-if="tabWithOpenMenu.menuType === \'Nested\'" ng-repeat="row in tabWithOpenMenu.categoryRows" class="submenu-row" ng-hide="row.visible === false"> <div class="text-overflow text-label">{{ row.title }}</div> <ul> <li ng-repeat="menu in row.subCategoryMenu" ng-hide="menu.visible === false" ng-click="onMenuClick(tabWithOpenMenu,menu,row)" ng-class="{\'active\': (menu === selectedMenu)}" class="text"> {{ menu.label }} </li> </ul> </div> <div ng-if="tabWithOpenMenu.menuType !== \'Nested\'"> <ul ng-class="{\'float-right\': (tabWithOpenMenu.name === \'Costumes\')}"> <li ng-repeat="menu in tabWithOpenMenu.subCategoryMenu" ng-hide="menu.visible === false" ng-click="onMenuClick(tabWithOpenMenu,menu)" ng-class="{\'active\': (menu === selectedMenu)}" class="text"> {{ menu.label }} </li> </ul> </div> </div> </div>'},function(e,t){e.exports='<div class="item-card-container remove-panel" ng-class="{\'outfit-card\':item.type === \'Outfit\'}"> <div class="item-card-link"> <a href="{{item.link}}" ng-click="onItemClicked(item,$event)" class="item-card-thumb-container" data-item-name="{{item.name}}"> <thumbnail-2d class="item-card-thumb" thumbnail-target-id="item.id" thumbnail-type="item.thumbnailType"> </thumbnail-2d> </a> </div> <div class="item-card-caption"> <div ng-show="item.selected && isAssetTypeSelectionEnabled(item.assetType.name)" class="item-card-equipped" data-item-status="equipped"> <div class="item-card-equipped-label"></div> <span class="icon-check-selection"></span> </div> <div ng-if="item.type === \'Outfit\'" ng-class="{active:item.active}" class="item-card-menu" blur-target="item" on-blur> <button ng-repeat="option in outfitMenuOptions" ng-click="onItemMenuButtonClicked($event,item,option)" type="button" class="btn-secondary-xs">{{option.label}}</button> </div> <a href="{{item.link}}" class="item-card-name-link"> <div title="{{item.name}}" class="text-overflow item-card-name">{{item.name}}</div> </a> <span ng-if="item.type === \'Outfit\' && item.isEditable === true" ng-click="openOutfitMenu(item)" class="icon-settings-16x16 edit-outfit" data-item-name="{{item.name}}"></span> </div> </div>'},function(e,t){e.exports='<div class="items-list avatar-item-list"> <ul class="hlist item-cards-stackable"> <li ng-repeat="item in items" class="list-item item-card"> <div avatar-item-card></div> </li> </ul> </div> <div ng-show="loading" loading-animated></div> <div ng-show="!loading && items.length === 0" class="col-xs-12 section-content-off"> <div ng-if="isOutfitCostumeMessage"> {{ emptyMessage() }} </div> <div ng-if="!isOutfitCostumeMessage"> {{ emptyMessage }} </div> </div>'},function(e,t){e.exports='<h4 class="scaling-info"> {{ "Heading.Scaling" | translate }} <span class="tooltip-container" data-toggle="tooltip" title="{{ \'Message.SelectEnableScaling\' | translate }}"> <span class="icon-moreinfo-16x16"></span> </span> </h4> <div ng-if="pageLoaded" ng-hide="avatarDataModel.scaleEnabled" class="message-banner">{{ "Message.SelectEnableScaling" | translate }}</div> <div ng-if="!pageLoaded" loading-animated></div> <div ng-controller="avatarScaleController" class="section-sliders"> <div ng-class="{ \'invisible\': !$parent.pageLoaded }" class="scale-container" ng-repeat="scale in scales"> <div ng-if="!(avatarDataModel.isBodyTypeScaleOutOfTab && scale.type == \'BodyType\')"> <div class="text-label font-subheader-1">{{scale.label}}</div> <div class="scale-label font-body">{{ (scale.value / 100) | percentage:0 }}%</div> <input type="range" on-input-finished="updateScales()" class="pr{{ (scale.value-scale.min) / (scale.max-scale.min) | percentage:0 | round:4 }}" id="{{scale.label | lowercase}}-scale" ng-disabled="!avatarDataModel.scaleEnabled" step="{{scale.increment}}" min="{{scale.min}}" max="{{scale.max}}" ng-model="scale.value"/> </div> </div> </div> '},function(e,t){e.exports=' <div ng-controller="recentItemsController" class="tab-pane" id="recent" ng-class="{\'active\':(selectedTab.name === \'Recent\')}"> <div avatar-items id="recent-items-container"></div> </div> <div ng-controller="avatarItemsController" class="tab-pane" id="clothing" ng-init="init()" ng-class="{\'active\':(selectedTab.tabType === \'Assets\' && selectedMenu.name !== \'BodyColors\' && selectedMenu.name !== \'Scale\')}"> <div> <button ng-if="selectedMenu.name === \'Emote\'" ng-type="button" class="equip-emotes-button btn-secondary-xs btn-float-right" ng-click="openEmotesModal()"> {{ "Heading.EquipEmotes" | translate }} </button> </div> <div avatar-items infinite-scroll="getNextPage()" infinite-scroll-distance="3" id="avatar-items-container"></div> <a class="text-link advanced-link" ng-click="openAdvancedAccessories()" ng-show="showAdvancedAccessoriesLink">{{ "Action.Advanced" | translate }}</a> <recommendations ng-if="recommendationsData.showRecommendations" recommendation-type="recommendationsData.recommendationType" recommendation-subtype="recommendationsData.recommendationSubtype" page-name="Avatar" show-see-all-button="true"></recommendations> </div> <div ng-controller="bodyColorsController" class="tab-pane" id="bodyColors" ng-class="{\'active\':(selectedTab.name === \'Body\' && selectedMenu.name === \'BodyColors\')}"> <div class="section-content"> <div class="bodycolors-list"> <div ng-repeat="bodyColor in colorsPalette" class="color-dot" ng-click="onColorDotClicked(bodyColor)" ng-class="{active: isColorSelected(bodyColor)}" ng-style="{\'background-color\': bodyColor.hexColor}"></div> </div> <a class="text-link advanced-link" ng-click="openAdvancedBodyColors()">{{ "Action.Advanced" | translate }}</a> </div> </div> <div ng-if="avatarDataModel.isAvatarScaleEmbeddedInTab" class="tab-pane scaling-tab" id="scale" ng-class="{\'active\':(selectedTab.name === \'Body\' && selectedMenu.name === \'Scale\')}"> <div class="section-content"> <div avatar-scaling></div> </div> </div> <div ng-controller="outfitsController" class="tab-pane" id="costumes" ng-class="{\'active\':(selectedTab.name === \'Outfits\') || (selectedTab.name === \'Costumes\')}"> <div> <button ng-if="selectedMenu.name !== \'PresetCostumes\'" ng-type="button" class="btn-secondary-xs btn-float-right" ng-click="createOutfitClicked()"> {{createNewOutfitLabel}} </button> </div> <div avatar-items infinite-scroll="getNextPage(selectedMenu.name)" infinite-scroll-distance="1"></div> </div> '},function(e,t){e.exports=' <ul class="breadcrumb-container"> <li>{{selectedTab.label}}</li> <li ng-if="(selectedMenu != null)"> <span class="icon-right-16x16"></span> </li> <li ng-if="(selectedMenu != null)"> <span>{{selectedMenu.label}}</span> </li> </ul> <div class="col-md-12 alert alert-info avatar-editor-alert" ng-if="displayPresetCostumeDelayMessage"> <span> {{ "Message.PresetCostumesDelay" | translate }} </span> </div> <span ng-if="selectedMenu != null"> <a ng-if="selectedMenu.name == \'Shirts\'" class="btn-float-right btn-min-width btn-secondary-xs" ng-href="{{createUrl}}{{shirtId}}"> {{ "Action.Create" | translate }} </a> <a ng-if="selectedMenu.name == \'Pants\'" class="btn-float-right btn-min-width btn-secondary-xs" ng-href="{{createUrl}}{{pantsId}}"> {{ "Action.Create" | translate }} </a> <a ng-if="selectedMenu.name == \'T-Shirts\'" class="btn-float-right btn-min-width btn-secondary-xs" ng-href="{{createUrl}}{{tShirtId}}"> {{ "Action.Create" | translate }} </a> </span>'},function(e,t){e.exports='<div class="item-card-container" ng-class="{\'is-selected\' : selectedAssetId === item.id}" ng-click="onEmotesCardClick(item.id)" data-item-id="{{item.id}}" data-item-name="{{item.name}}"> <div class="item-card-link"> <div class="item-card-thumb-container"> <thumbnail-2d class="item-card-thumb emotes-center-div" thumbnail-type="thumbnailTypes.assetThumbnail" thumbnail-target-id="item.id"/> </div> </div> <div class="item-card-caption"> <div class="item-card-name-link"> <div title="{{item.name}}" class="text-overflow item-card-name">{{item.name}}</div> </div> </div> </div>'},function(e,t){e.exports='<span class="spinner spinner-default"></span> '},function(e,t,a){"use strict";a.r(t);var s,o,i,r,n=a(2),l=a.n(n),c=a(3),d=a(5),u=a.n(d);function m(){s=u()("#header"),o=10,i=u()("#wrap"),u()(window).scroll(g),g()}function g(){if(void 0===r){var e=u()(".right-wrapper-placeholder");if(!(0<e.length))return;r=e}var t=r[0].getBoundingClientRect().top,a=r.is(":visible"),n=s.height();a&&t-n-o<0?i.addClass("pinned"):i.removeClass("pinned")}u()(function(){m()});var v={init:m},f=a(0);a(16),a(17);Object(c.importFilesUnderPath)(a(18)),Object(c.importFilesUnderPath)(a(21)),Object(c.importFilesUnderPath)(a(32)),Object(c.importFilesUnderPath)(a(46)),Object(c.importFilesUnderPath)(a(50));var b=a(55),p=Object(c.templateCacheGenerator)(l.a,"avatarAppTemplates",b);l.a.element(function(){l.a.bootstrap("#avatar-container",[f.a.name,p.name])}),window.avatar=f.a,window.Roblox.avatar=v;t.default=f.a},function(e,t,a){"use strict";a.r(t);var n=a(2),ce=a.n(n),de=a(1),s=216/24389,o=24389/27,i={X:95.047,Y:100,Z:108.883};function S(e){return e*(Math.PI/180)}function r(e){return function(e){var t=c(e.X/i.X),a=c(e.Y/i.Y),n=c(e.Z/i.Z);return{L:Math.max(0,116*a-16),A:500*(t-a),B:200*(a-n)}}(function(e){var t=l(e.R/255),a=l(e.G/255),n=l(e.B/255);return{X:.4124*t+.3576*a+.1805*n,Y:.2126*t+.7152*a+.0722*n,Z:.0193*t+.1192*a+.9505*n}}(e))}function l(e){return.04045<e?100*Math.pow((e+.055)/1.055,2.4):e/12.92*100}function c(e){return s<e?Math.pow(e,1/3):o*e+16/116}var ue={DeltaE:function(e,t){return function(e,t){var a,n,s=S(360),o=S(180),i=Math.pow(25,7),r=Math.sqrt(e.A*e.A+e.B*e.B),l=Math.sqrt(t.A*t.A+t.B*t.B),c=(r+l)/2,d=.5*(1-Math.sqrt(Math.pow(c,7)/(Math.pow(c,7)+i))),u=(1+d)*e.A,m=(1+d)*t.A,g=Math.sqrt(u*u+e.B*e.B),v=Math.sqrt(m*m+t.B*t.B);0===e.B&&0==u?a=0:(a=Math.atan2(e.B,u))<0&&(a+=s);0===t.B&&0==m?n=0:(n=Math.atan2(t.B,m))<0&&(n+=s);var f,b=t.L-e.L,p=v-g,h=g*v;0==h?f=0:(f=n-a)<-o?f+=s:o<f&&(f-=s);f=2*Math.sqrt(h)*Math.sin(f/2);var y,C=(e.L+t.L)/2,A=(g+v)/2,T=a+n;y=g*g==0?T:Math.abs(a-n)<=o?T/2:T<s?(T+s)/2:(T-s)/2;var M=1-.17*Math.cos(y-S(30))+.24*Math.cos(2*y)+.32*Math.cos(3*y+S(6))-.2*Math.cos(4*y-S(63)),I=S(30)*Math.exp(-Math.pow((y-S(275))/S(25),2)),L=2*Math.sqrt(Math.pow(A,7)/(Math.pow(A,7)+i)),k=1+.015*Math.pow(C-50,2)/Math.sqrt(20+Math.pow(C-50,2)),D=1+.045*A,w=1+.015*A*M,O=-Math.sin(2*I)*L;return Math.sqrt(Math.pow(b/(1*k),2)+Math.pow(p/(1*D),2)+Math.pow(f/(1*w),2)+p/(1*D)*O*(f/(1*w)))}(r(e),r(t))}},d=a(0);function u(o,l,t,s,e,i,c,d,a,n,u,r,m,g,v,f,b,p,h,y){var C=f;l.debug("avatarController starting"),o.pageLoaded=!1,o.bundlesEnabledForUser=!1,o.emotesEnabledForUser=!1;var A=c.outfits.outfitMessages;o.selectedCategory=null,o.selectedSubcategory=null,o.categoryDict={},o.subcategoryDict={};var T="Roblox.PresetCostumes.InitialDelay";o.createUrl="/develop?directLink=1&view=",o.shirtId,o.tShirtId,o.pantsId,o.systemFeedback={error:function(e,t){void 0===t&&(t=2e3),de.BootstrapWidgets.ToggleSystemMessage($(".alert-warning"),100,t,e)},loading:function(e){de.BootstrapWidgets.ToggleSystemMessage($(".alert-loading"),100,2e3,e)},success:function(e){de.BootstrapWidgets.ToggleSystemMessage($(".alert-success"),100,2e3,e)},info:function(e){de.BootstrapWidgets.ToggleSystemMessage($(".alert-info"),100,2e3,e)}},o.isThumbnailLoading=!1,o.refreshThumbnail=function(){return o.isThumbnailLoading=!0,p.reloadThumbnailImage(h.thumbnailTypes.avatar,o.avatarDataModel.userId,h.thumbnailAvatarsSize.size352).finally(function(){o.isThumbnailLoading=!1})},o.redrawFloodchecked=!1,o.redrawThumbnail=function(){i.redrawThumbnail().then(function(){o.refreshThumbnail()},function(e){e&&e.errors&&e.errors[0]&&1===e.errors[0].code?(o.systemFeedback.error(c.thumbnail.redrawFloodchecked),l.debug("Disabled redraw button"),o.redrawFloodchecked=!0,t(function(){l.debug("Re-enabled redraw"),o.redrawFloodchecked=!1},1e3*c.thumbnail.waitForThumbnailRegenerationInSeconds)):o.systemFeedback.error(c.thumbnail.redrawThumbnailFailed)})},o.threeDToggleData={is3d:!1,avatarToggleButton:c.thumbnail.threeDeeButton};function M(){o.threeDToggleData.avatarToggleButton=o.threeDToggleData.is3d?c.thumbnail.twoDeeButton:c.thumbnail.threeDeeButton}o.toggleThreeDee=function(){o.threeDToggleData.is3d=!o.threeDToggleData.is3d,y.setLocalStorage(c.thumbnail.useThreeDeeThumbsKey,o.threeDToggleData.is3d),M()};o.threeDToggleData.is3d=y.getLocalStorage(c.thumbnail.useThreeDeeThumbsKey),M();var I=null,L=null,k={},D={};function w(){var e=i.getAvatar();return e.then(function(e){o.loadAvatarDetailsSuccessCallBack(e)}),e}function O(e){return o.emotesEnabledForUser?b.assetTypeLookup[e]:k[e]}o.loadAvatarDetailsSuccessCallBack=function(e){l.debug("Retrieved avatar details"),z((L=e).assets),_(),o.$broadcast(c.events.avatarDetailsLoaded,L)},o.loadRulesSuccessCallBack=function(e){l.debug("Retrieved avatar rules"),I=e,o.bundlesEnabledForUser=I.bundlesEnabledForUser,o.emotesEnabledForUser=I.emotesEnabledForUser,A=o.bundlesEnabledForUser?c.outfits.costumeMessages:c.outfits.outfitMessages,o.$broadcast(c.events.avatarRulesLoaded,I);I.wearableAssetTypes.push({id:32,name:"Package",maxCount:0}),o.emotesEnabledForUser?b.setAssetTypeLookups(I.wearableAssetTypes):ce.a.forEach(I.wearableAssetTypes,function(e){k[e.id]=e,D[e.name]=e})},o.getAssetTypeName=function(e){if(o.emotesEnabledForUser)return b.getAssetTypeName(e);var t=O(e);return t&&t.name?t.name:null},o.getAssetTypeByName=function(e){return o.emotesEnabledForUser?b.getAssetTypeByName(e):D[e]};function S(a){return function(e){var t=e.duration;return de.ThumbnailMetrics&&de.ThumbnailMetrics.logFinalThumbnailTime(t,a)}}function x(e){return function(){return de.ThumbnailMetrics&&de.ThumbnailMetrics.logThumbnailTimeout(e)}}function E(e){l.debug("Retrieved avatar rules and details and metaData");var t=e[0],a=e[1],n=e[2],s=e[3];o.buildAvatarDataModel(n,s),o.loadRulesSuccessCallBack(t),function(){var e=o.getAssetTypeByName("Shirt"),t=o.getAssetTypeByName("T-Shirt"),a=o.getAssetTypeByName("Pants");o.shirtId=null!==e?e.id:"",o.tShirtId=null!==t?t.id:"",o.pantsId=null!==a?a.id:""}(),o.initializePage(),o.loadAvatarDetailsSuccessCallBack(a),o.avatarLibrary={avatarRules:t,avatarDetails:a,metaData:n},o.pageLoaded=!0,de.ThumbnailView.setupDelayedThumbnailHolders(),o.$broadcast(c.events.pageLoaded,{avatarRules:t,avatarDetails:a,metaData:n})}function P(){o.initializeAvatarThumbnail()}function U(){var e=i.getRules(),t=i.getAvatar(),a=i.getMetaData();a.then(de.ThumbnailView.setupDelayedThumbnailHolders());var n=[e,t,a,P()];o.systemFeedback.error(c.page.errorLoadingPage,6e4),s.all(n).then(E)}function B(){return o.tabWithOpenMenu&&o.tabWithOpenMenu.active}function F(e){var t=!1;if(e&&e.errors)for(var a=0;a<e.errors.length;a++)e.errors[a].code===c.outfits.outfitErrorCodes.invalidOutfitName&&(t=!0);return t}function N(e){switch(e){case a.hat:case a.hairAccessory:case a.faceAccessory:case a.neckAccessory:case a.shoulderAccessory:case a.frontAccessory:case a.backAccessory:case a.waistAccessory:return!0;default:return!1}}function R(e){switch(e.assetType.name){case a.climbAnimation:case a.fallAnimation:case a.jumpAnimation:case a.runAnimation:case a.swimAnimation:case a.walkAnimation:return!1;default:return!0}}function j(){var e=o.selectedMenu;o.showAdvancedAccessoriesLink=e&&e.assetType&&N(e.assetType)}function H(e,n,s){var t=function(){var e,t=c.modalLayout.advancedAccessoriesDoubleCheck;return e={titleText:t.title,bodyText:t.bodyText,actionButtonShow:!0,actionButtonText:t.confirmBtnName,neutralButtonText:t.cancelBtnName},g.open(e).result}();l.debug(t),t.then(function(){l.debug("Confirmed double check modal");var t=[];ce.a.forEach(n,function(e){""!==e.id&&t.push(e.id)}),ce.a.forEach(e,function(e){t.push(e.id)}),K(t,!0).then(function(e){if(e&&e.invalidAssetIds&&0<e.invalidAssetIds.length){var a=e.invalidAssetIds;l.debug(a),ce.a.forEach(n,function(e){l.debug(e);var t=""===e.id||-1===a.indexOf(parseInt(e.id));e.valid=t}),u.fireEvent(c.googleAnalytics.category,c.googleAnalytics.advancedAccessoriesAction,c.googleAnalytics.saveFailedLabel)}else o.systemFeedback.success(c.assets.savedAdvancedAccessories),l.debug("Successfully saved advanced assets"),s(),u.fireEvent(c.googleAnalytics.category,c.googleAnalytics.advancedAccessoriesAction,c.googleAnalytics.saveLabel)},function(e){o.systemFeedback.error(c.assets.errorUpdatingItems)})},function(){l.debug("Cancelled double check modal")})}o.initializeAvatarThumbnail=function(){o.avatarDataModel.thumbnailCacheKey="",o.avatarDataModel.thumbnailType=h.thumbnailTypes.avatar,o.avatarDataModel.thumbnailOptions={size:h.thumbnailAvatarsSize.size352},o.avatarDataModel.on2dAvatarSuccess=S("2dThumbnailOnLoad"),o.avatarDataModel.on3dAvatarSuccess=S("3dThumbnail"),o.avatarDataModel.on2dAvatarFailure=x("2dThumbnailOnLoad"),o.avatarDataModel.on3dAvatarFailure=x("3dThumbnail")},o.initializePage=function(){!0===o.avatarDataModel.isAvatarScaleEmbeddedInTab&&ce.a.forEach(o.tabs,function(e){"Body"===e.name&&ce.a.forEach(e.categoryRows,function(e){"Appearance"===e.name&&ce.a.forEach(e.subCategoryMenu,function(e){"Scale"===e.name&&(e.visible=!0)})})}),o.emotesEnabledForUser&&ce.a.forEach(o.tabs,function(e){"AvatarAnimations"===e.name&&ce.a.forEach(e.subCategoryMenu,function(e){"Emote"===e.name&&(e.visible=!0)})}),!0===o.bundlesEnabledForUser&&ce.a.forEach(o.tabs,function(e){"Outfits"===e.name&&(e.visible=!1),"Costumes"===e.name&&(e.visible=!0),"Recent"===e.name&&ce.a.forEach(e.subCategoryMenu,function(e){"Outfits"===e.name&&(e.label=C.get("Label.Costume"))}),"Body"===e.name&&ce.a.forEach(e.categoryRows,function(e){"Packages"===e.name&&(e.visible=!1)})})},o.buildAvatarDataModel=function(e,t){ce.a.extend(o.avatarDataModel,e),o.avatarDataModel.userId=de.CurrentUser.userId,o.avatarDataModel.catalogPageUrl=r.getAbsoluteUrl("/catalog")},o.loadAvatarPage=function(){var e=i.getRules(),t=i.getAvatar(!1),a=i.getMetaData(!1);o.avatarDataModel={userId:de.CurrentUser.userId,scaleEnabled:!1},oe(),se(),a.then(de.ThumbnailView.setupDelayedThumbnailHolders()),s.all([e,t,a,P()]).then(E,U)},o.tabs=c.tabs,o.selectedTab=null,o.selectedMenu=null,o.selectedCategory=null,o.selectedSubcategory=null,o.tabWithOpenMenu=null,o.isMenuOpen=!1,o.mouseLeftTabMenu=function(){B()||(o.tabWithOpenMenu=null,o.isMenuOpen=!1)},o.onTabBlur=function(e){o.tabWithOpenMenu=null,o.isMenuOpen=!1},o.onTabClick=function(e){if(e.noSubCategoryMenu)o.onMenuClick(e,null);else{if(B())return o.tabWithOpenMenu===e?(o.tabWithOpenMenu=null,o.isMenuOpen=!1,void(e.active=!1)):(o.tabWithOpenMenu.active=!1,o.tabWithOpenMenu=e,o.isMenuOpen=!0,void(e.active=!0));o.isMenuOpen=!0,(o.tabWithOpenMenu=e).active=!0}},o.onTabHover=function(e){B()||(o.tabWithOpenMenu=e,o.isMenuOpen=!0)},o.scrollToTop=function(){ce.a.element("#wrap").hasClass("pinned")&&n("tab-content-top")},o.onMenuClick=function(e,t,a){o.isMenuOpen=!1,o.tabWithOpenMenu=null,o.selectedTab=e,null!==(o.selectedMenu=t)&&"PresetCostumes"===t.name?function(e){return!!v.localStorage&&"true"===v.localStorage.getItem(e)}(T)||(o.displayPresetCostumeDelayMessage=!0,function(e){v.localStorage&&v.localStorage.setItem(e,"true")}(T)):o.displayPresetCostumeDelayMessage=!1,o.selectedCategory=null!=a?a.name:e.name,o.selectedSubcategory=null===t?"":t.name,o.scrollToTop(),j(),o.$broadcast(c.events.menuClicked,{tab:e,menu:t}),u.viewVirtual("".concat(d.www.avatar,"/").concat(e.name).concat(null===t?"":"/"+t.name))},o.openOutfitMenu=function(e){e.active=!0},o.closeOutfitMenu=function(e){e.active&&(e.active=!1)},o.onItemMenuButtonClicked=function(e,t,a){switch(t.active=!1,a.name){case"Delete":!function(t){var e=c.modalLayout.outfitDelete,a=o.bundlesEnabledForUser?C.get("Label.Costume"):C.get("Label.Outfit"),n={titleText:e.titlePrefix(a),bodyText:e.bodyText(a),actionButtonShow:!0,actionButtonText:e.confirmBtnName,neutralButtonText:e.cancelBtnName,actionButtonId:e.confirmBtnId};g.open(n).result.then(function(e){!function(e){l.debug("User clicked delete outfit"),i.deleteOutfit(e.id).then(function(){o.$broadcast(c.events.outfitDeleted,e),o.systemFeedback.success(A.successfulDelete)},function(){o.systemFeedback.error(A.errorDeletingOutfit)})}(t)})}(t);break;case"Update":!function(t){var e=c.modalLayout.outfitUpdate,a=o.bundlesEnabledForUser?C.get("Label.Costume"):C.get("Label.Outfit"),n={titleText:e.titlePrefix(a),bodyText:e.bodyText(a),actionButtonShow:!0,actionButtonText:e.confirmBtnName,neutralButtonText:e.cancelBtnName,actionButtonId:e.confirmBtnId};g.open(n).result.then(function(e){!function(t){l.debug("User clicked update outfit"),w().then(function(){var e={bodyColors:L.bodyColors,assetIds:G(L.assets)};i.patchOutfit(t.id,e).then(function(){l.debug("Updated outfit"),o.systemFeedback.success(A.successfulUpdate),o.addItemThumbnailAndLink(t)},function(e){e&&e.errors&&e.errors[0]&&1===e.errors[0].code?o.systemFeedback.error(A.updateFailedOutfitDeleted):o.systemFeedback.error(A.errorUpdatingOutfit)})})}(t)})}(t);break;case"Rename":!function(t){var e={animation:!1,templateUrl:d.modals.outfitName.templateUrl,controller:d.modals.outfitName.controllerName,openedClass:d.modals.openedClass,resolve:{modalData:{title:A.renameOutfitTitle,description:A.renameOutfitDescription,buttonName:A.renameOutfitButton,nameInputPlaceholder:A.nameInputPlaceholder}}};m.open(e).result.then(function(e){!function(t,a){l.debug("User clicked rename outfit");var e={name:a};i.patchOutfit(t.id,e).then(function(e){e&&e.name?t.name=e.name:t.name=a,o.systemFeedback.success(A.successfulRename)},function(e){F(e)?o.systemFeedback.error(A.invalidOutfitName):o.systemFeedback.error(A.errorRenamingOutfit)})}(t,e.outfitName)})}(t)}},o.openEmotesModal=function(e){var t={animation:!1,templateUrl:d.modals.emotes.templateUrl,controller:d.modals.emotes.controllerName,openedClass:"",size:"md",windowClass:"emotes-modal",resolve:{modalData:{assetTypeInfo:b.getAssetTypeByName([c.emotes.assetType]),isMenuOpen:o.isMenuOpen,selectedTab:o.selectedTab,selectedMenu:o.selectedMenu,selectedCategory:o.selectedCategory,selectedSubcategory:o.selectedSubcategory,addItemThumbnailAndLink:o.addItemThumbnailAndLink,systemFeedback:o.systemFeedback,selectedItem:e}}};m.open(t).result.then(function(e){})},o.outfitMenuOptions=c.outfits.menuOptions,o.createOutfitClicked=function(){!function(){var e={animation:!1,templateUrl:d.modals.outfitName.templateUrl,controller:d.modals.outfitName.controllerName,openedClass:d.modals.openedClass,resolve:{modalData:{title:A.createOutfitTitle,description:A.createOutfitDescription,buttonName:A.createOutfitButton,nameInputPlaceholder:A.nameInputPlaceholder}}};m.open(e).result.then(function(e){!function(a){l.debug("User clicked create outfit"),w().then(function(){var e=L.bodyColors,t=G(L.assets);i.createOutfit(a,e,t).then(function(){o.$broadcast(c.events.outfitsChanged,null),o.systemFeedback.success(A.successfulCreate)},function(e){(o.$broadcast(c.events.outfitsChanged,null),e&&e.errors&&e.errors[0]&&e.errors[0].code===c.outfits.outfitErrorCodes.maxOutfits)?o.systemFeedback.error(A.maxNumberOfOutfits):F(e)?o.systemFeedback.error(A.invalidOutfitName):o.systemFeedback.error(A.errorCreatingOutfit)})})}(e.outfitName)})}()},o.isAssetTypeSelectionEnabled=function(e){switch(e){case a.emoteAnimation:return!1;default:return!0}},o.showAdvancedAccessoriesLink=!0,o.openAdvancedAccessories=function(){var e=d.modals.advancedAccessories.templateUrl,t=[],a=[];ce.a.forEach(W,function(e){N(e.assetType.name)?t.push({id:e.id,valid:!0}):a.push(e)});for(var n=0;n<10;n++)void 0===t[n]&&(t[n]={id:"",valid:!0});var s=/catalog\/(\d+)/i,o=/^\d+$/i;var i={advancedAccessorySlots:t,onChange:function(e){var t=function(e){var t=s.exec(e);return null!==t&&t[1]?t[1]:null}(e.id);null!==t&&(e.id=t),e.valid=""===e.id||function(e){return null!==o.exec(e)}(e.id)},onSaveClick:function(e){l.debug("submitFunc",e),H(a,t,e)}},r={animation:!1,templateUrl:e,controller:d.modals.advancedAccessories.controllerName,openedClass:d.modals.openedClass,resolve:{modalData:i}};m.open(r).result.then(function(){l.debug("User clicked save assets in advanced view")},function(){l.debug("User cancelled out of assets advanced view"),u.fireEvent(c.googleAnalytics.category,c.googleAnalytics.advancedAccessoriesAction,c.googleAnalytics.closeLabel)}),u.fireEvent(c.googleAnalytics.category,c.googleAnalytics.advancedAccessoriesAction,c.googleAnalytics.openLabel)},o.onItemClicked=function(e,t){if(t.preventDefault(),"Outfit"===e.type)!function(e){i.wearOutfit(e.id).then(function(e){if(o.refreshThumbnail(),w(),e&&e.invalidAssetIds&&0<e.invalidAssetIds.length){var t=e.invalidAssetIds.length,a=c.outfits.missingItemsFromOutfit(t.toString());o.systemFeedback.error(a)}else o.systemFeedback.success(A.successfulWear)},function(){o.systemFeedback.error(A.errorWearingOutfit)})}(e);else if("Asset"===e.type){if(o.emotesEnabledForUser){var a=b.getAssetTypeByName(["Emote Animation"]);if(null!==e.assetType&&null!==a&&e.assetType.id===a.id)return void o.openEmotesModal(e)}if("Package"===e.assetType.name)return void function(e){i.wearAsset(e.id).then(function(e){if(o.refreshThumbnail(),w(),e&&e.invalidAssetIds&&0<e.invalidAssetIds.length){var t=e.invalidAssetIds.length,a=c.outfits.missingItemsFromOutfit(t.toString());o.systemFeedback.error(a)}},function(){o.systemFeedback.error(c.packages.errorWearingPackage)})}(e);e.selected?(e.selected=!1,Z(e)):(e.selected=!0,function(e){var s=[],o={},i=N(e.assetType.name);function t(e){var t=e.assetType,a=!i&&N(t.name)?c.assets.maxAccessories:function(e){var t=O(e);return t?t.maxNumber:1}(t.id),n=function(e){return!i&&N(e.name)?"Accessory":e.name}(e.assetType);o[n]=void 0===o[n]?0:o[n],o[n]<a?(o[n]+=1,s.push(e)):l.debug("Removed asset ".concat(e.name," because it exceeded wearing limits"))}t(e),ce.a.forEach(W,function(e){t(e)}),J=R(e),V(s)}(e))}},o.addItemThumbnailAndLink=function(e){switch(e.thumbnail={Final:!1,Url:""},e.type){case"Asset":e.thumbnailType=h.thumbnailTypes.assetThumbnail,e.link=de.Endpoints.getCatalogItemUrl(e.id,e.name);break;case"Outfit":e.thumbnailType=h.thumbnailTypes.userOutfit}},o.hatSlots=[],o.onHatSlotClicked=function(e){Z(e)};var W=[],q=[];function G(e){var t=[];return ce.a.forEach(e,function(e){t.push(e.id)}),t}function z(e){q=function(e){var t=G(e),a={};return ce.a.forEach(t,function(e){a[e]=!0}),a}(W=e)}function _(){var e=G(W);o.$broadcast(c.events.wornAssetsChanged,e),function(e){var a=[],n=0;for(ce.a.forEach(e,function(e){if(!(3<=n)&&"Hat"===e.assetType.name){var t={type:"Asset"};ce.a.extend(t,e),o.addItemThumbnailAndLink(t),n++,a.push(t)}});n<3;)n++,a.push({empty:!0});o.hatSlots=a}(W)}o.updateItemSelected=function(e){e.selected="Asset"===e.type&&!0===q[e.id]};var J=!0;function K(e,t){var a=i.setWearingAssets(e);return a.then(function(){l.debug("Success with set-wearing-assets"),J?o.refreshThumbnail():J=!0,t&&w()},function(){l.debug("Error with set-wearing-assets")}),a}function V(e){var t=W;z(e),_();var a=K(G(W),!1);return a.then(function(){},function(){o.systemFeedback.error(c.assets.errorUpdatingItems),z(t),_()}),a}function Z(t){var a=[];return ce.a.forEach(W,function(e){e.id!==t.id&&a.push(e)}),J=R(t),V(a)}o.toastLayout={isNeeded:!1,timeout:c.defaultClothing.displayTimeInMilliseconds,text:c.defaultClothing.wearClothing};var Y=null,X=null,Q=!0;function ee(e){for(var t="#000000",a=0;a<I.bodyColorsPalette.length;a++){var n=I.bodyColorsPalette[a];n.brickColorId===e&&(t=n.hexColor)}var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(null===s)throw new Error("Unable to parse bodyColor with ID=".concat(e," and retrieved hex=").concat(t));return{R:parseInt(s[1],16),G:parseInt(s[2],16),B:parseInt(s[3],16)}}function te(e,t){var a=ee(e),n=ee(t);return ue.DeltaE(a,n)<I.minimumDeltaEBodyColorDifference}function ae(e){return null!==e&&null!==L&&(!!function(e){var t=e.torsoColorId===e.leftLegColorId&&e.leftLegColorId===e.rightLegColorId;return o.avatarDataModel.defaultClothingForSimilarColorsEnabled?t||te(e.torsoColorId,e.rightLegColorId)||te(e.torsoColorId,e.leftLegColorId):t}(e)&&!function(e){for(var t=0;t<W.length;t++){if(W[t].assetType.name===e)return!0}return!1}("Pants"))}function ne(){if(null!==o.avatarDataModel&&o.avatarDataModel.enableDefaultClothingMessage)if(!Q||o.avatarDataModel.showDefaultClothingMessageOnPageLoad){var e=ae(X),t=Y!==e;(Y=e)&&t&&(o.toastLayout.isNeeded=!0)}else Q=!1}var se=function(){return i.getCategories().then(function(e){o.categoryDict=e})},oe=function(){return i.getSubcategories().then(function(e){o.subcategoryDict=e})};o.$on(c.events.avatarDetailsLoaded,function(e,t){X=t.bodyColors,ne()}),e.$on(c.events.bodyColorsChanged,function(e,t){X=t,ne()});var ie=!0;o.$on(c.events.wornAssetsChanged,function(e,t){ie?ie=!1:ne()});var re=o.tabs[0],le=re.subCategoryMenu?re.subCategoryMenu[0]:re.categoryRows[0].subCategoryMenu[0];o.onMenuClick(re,le),o.loadAvatarPage(),j(),o.pageFocused=function(e){l.debug("Page didn't have focus for ",e),e>c.page.idleRefreshTimeInSeconds&&(w(),o.refreshThumbnail())}}u.$inject=["$scope","$log","$timeout","$q","$rootScope","avatarService","avatarConstantService","avatarUrlConstants","avatarAssetTypeNames","$anchorScroll","googleAnalyticsEventsService","urlService","$uibModal","modalService","$window","languageResource","avatarTypeService","thumbnailService","thumbnailConstants","localStorageService"],d.a.controller("avatarController",u);t.default=u}]);
//# sourceMappingURL=/rbxcdn/js/769dc1c688afcc0486b4-avatar.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("Avatar");